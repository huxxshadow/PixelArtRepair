
# AI Pixelation and Color Quantization Tool

本工具旨在通过多种像素化和颜色量化技术，优化由 MidJourney 等 AI 绘画工具生成的像素风格图片。用户可以根据需求对图像进行不同的像素化处理，并应用颜色量化算法，生成符合像素艺术风格的图像效果。

This tool is designed to optimize pixel-style images generated by AI drawing tools such as MidJourney using various pixelation and color quantization techniques. Users can apply different pixelation processes and color quantization algorithms to generate images in line with pixel art styles.

## 功能特色 / Key Features

- **像素化效果 / Pixelation Effects**：
  - 经典邻近像素化 (Classic Nearest Neighbor)
  - 马赛克效果 (Mosaic)
  - 油画效果 (Oil Painting)
  - 层次像素化 (Hierarchical)

- **颜色量化算法 / Color Quantization Algorithms**：
  - K-Means 聚类 / K-Means Clustering
  - Median Cut 中值划分 / Median Cut
  - Floyd-Steinberg Dithering (弗洛伊德-斯坦伯格抖动)
  - Median Cut with Perceptual Weighting (带感知加权的中值划分 / Perceptual Weighting)

## 新工具 / New Tools

### 边缘修复工具 / Edge Repair Tool

#### 简介 / Overview

边缘修复工具使用 Canny 边缘检测算法来检测图像中的边缘，并结合自定义的邻域平均算法修复损坏的区域或边缘噪点。用户可以调整边缘检测的阈值，以及修复内核大小，以获得不同的修复效果。

The Edge Repair Tool detects edges in the image using the Canny edge detection algorithm and repairs damaged areas or edge artifacts using a custom neighborhood averaging algorithm. Users can adjust the edge detection thresholds and kernel size for different repair effects.

#### 主要功能 / Key Features

- 使用 Canny 算法进行边缘检测。
- 自定义邻域平均法修复边缘噪点或损坏区域。
- 可调节的边缘检测阈值和修复参数。
- 会造成图片的模糊，请结合像素化工具使用
- Canny edge detection.
- Custom neighborhood averaging method to repair edge artifacts or damaged areas.
- Adjustable edge detection thresholds and repair parameters.
- It may cause image blurring, so please use it in conjunction with the pixelation tool.

### 像素块检测工具 / Pixel Block Detection Tool

#### 简介 / Overview

像素块检测工具可以检测像素风格图像中的常见像素块尺寸。该工具通过扫描图像中的颜色变化，基于轮廓检测来推断颜色块的大小，帮助用户分析像素风格图像的网格结构。

The Pixel Block Detection Tool detects the common pixel block size in pixel-style images. It scans the image for color changes and uses contour detection to infer the size of color blocks, helping users analyze the grid structure in pixel art images.

#### 主要功能 / Key Features

- 基于颜色变化检测图像中的颜色块边界。
- 使用轮廓检测推断像素块大小。
- 输出最常见的像素块尺寸，便于分析和处理。

- Detects color block boundaries in images based on color changes.
- Uses contour detection to infer pixel block sizes.
- Outputs the most common pixel block size for analysis and processing.


## 在线工具 / Online Tools

您可以在线体验本工具的功能：

You can experience the tool online:

- [中文版本工具 / Chinese Version](https://huggingface.co/spaces/Huxxshadow/ImagePixelationTool)
- [英文版本工具 / English Version](https://huggingface.co/spaces/Huxxshadow/ImagePixelationTool_en)

## 效果对比图 / Example Comparison

以下展示了通过本工具对图像进行像素化处理的效果对比：
(放大后可明显观察出差别)

Below is a comparison of images processed with pixelation using this tool:
(The difference can be clearly observed when zoomed in)

  **示例对比图 / Example Images**：

| 原始图像 / Original Image                      | 像素化图像 / Pixelated Image                      |
|--------------------------------------------|----------------------------------------------|
| ![原始图像](/RawTitan.png) <!-- 替换为原始图像URL --> | ![像素化图像](/NewTitan.png) <!-- 替换为像素化图像URL --> |
| ![原始图像](/RawMoon.png) <!-- 替换为原始图像URL -->  | ![像素化图像](/NewMoon.png) <!-- 替换为像素化图像URL -->  |

## 适用场景 / Use Cases

- 优化 AI 生成的像素风格图片，进一步提升图片的像素化效果。
- Suitable for enhancing pixel-style images generated by AI tools, improving pixelation effects.
  
- 适用于需要生成复古游戏视觉效果或像素艺术作品的场景。
- Ideal for creating retro game visuals or pixel art projects.

- 通过颜色量化减少图片颜色数，适合需要压缩或优化图像的应用场景。
- By applying color quantization, it reduces the number of colors in an image, suitable for compression or optimization tasks.

## 使用方法 / How to Use

1. 克隆此项目并安装依赖 / Clone this project and install the dependencies:

   ```bash
   git clone https://github.com/your-repo/ai-pixelation-tool.git
   cd ai-pixelation-tool
   pip install -r requirements.txt
   ```

2. 运行工具 / Run the tool:

   ```bash
   python app_zh.py  # 中文界面版 / Chinese UI
   python app_en.py  # 英文界面版 / English UI
   ```

3. 上传图片，选择像素化方法、颜色量化算法以及对应的参数，点击生成按钮，得到处理后的像素风格图片。

- Upload an image, select pixelation methods, color quantization algorithms, and adjust parameters to generate a pixelated image.

4. （可选）启用 NVIDIA GPU 加速 / (Optional) Enabling NVIDIA GPU Acceleration:
-    注意：此功能仅在 Linux 或 Windows 的 WSL 环境中可用。
-    Note: This feature is only available on Linux or in Windows WSL environments.
-    如果您希望进一步加速颜色量化过程，特别是在使用 K-Means 颜色聚类时，可以启用 GPU 加速。
-    通过使用 cuML 和 cuPy，您可以在支持 CUDA 的 GPU 上运行 K-Means 聚类算法，从而显著提升处理速度。 
-    If you want to further accelerate the color quantization process, especially when using K-Means clustering, you can enable GPU acceleration.
-    By leveraging cuML and cuPy, you can run the K-Means algorithm on CUDA-supported GPUs, significantly improving processing speed.
-    安装 install Rapids https://docs.rapids.ai/install 
        





## 依赖库 / Dependencies

- Gradio 4.44.0
- NumPy 2.0.2
- Pillow 10.4.0
- Scikit-learn 1.5.2
- (Optional) cuML 23.06 (用于 GPU 加速 K-Means 聚类 / for GPU-accelerated K-Means)
- (Optional) cuPy 12.0.0 (用于 GPU 加速矩阵运算 / for GPU-accelerated array operations)

## 许可协议 / License

本项目基于 **MPL 2.0（Mozilla Public License 2.0）** 协议发布。该协议允许修改、分发和商业使用代码，前提是修改后的代码部分仍需保持开源。

This project is released under the **MPL 2.0 (Mozilla Public License 2.0)** license. The license allows modification, distribution, and commercial use, as long as the modified part of the source code remains open-source.

- **允许 / Allowed**: 修改、分发、用于商业用途 / Modification, distribution, and commercial use.
- **限制 / Restriction**: 修改过的源代码必须继续保持开源 / Modified source code must remain open-source.

[查看详细的 MPL 2.0 协议 / Read the full MPL 2.0 License](https://www.mozilla.org/en-US/MPL/2.0/)

**注意：如需将本工具用于商业用途，请联系作者以获得进一步的授权。**

**Note: Please contact the author for further authorization before using this tool for commercial purposes.**

## 联系方式 / Contact

如有任何疑问或商业合作需求，请联系：

For any questions or business inquiries, please contact:

- 邮箱 / Email：huxxshadowhzy@gmail.com

版权所有 © 2024 / Copyright © 2024

